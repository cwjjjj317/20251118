<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‰ å’–å•¡é­”æ³•å­¸é™¢ (æœ€çµ‚å®Œæ•´ç‰ˆ)</title>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <style>
        /* --- æ ¸å¿ƒè®Šæ•¸èˆ‡åŸºç¤æ¨£å¼ --- */
        :root {
            --primary-color: #6F4E37; /* å’–å•¡è‰² */
            --secondary-color: #D2B48C; /* æ·ºç±³è‰² */
            --success-color: #5cb85c; /* ç¶ è‰² */
            --error-color: #d9534f; /* ç´…è‰² */
            --font-family: 'å¾®è»Ÿæ­£é»‘é«”', 'Arial', sans-serif;
        }
        body {
            font-family: var(--font-family);
            background-color: var(--secondary-color); 
            color: #333;
            line-height: 1.8;
            margin: 0;
            padding: 20px;
            background-image: url('https://www.transparenttextures.com/patterns/cream-pixels.png'); 
            background-repeat: repeat;
            /* --- é­”æ³•æ£’æ¸¸æ¨™ï¼šä½¿ç”¨ä¸€å€‹ Material Icon ä½œç‚ºé­”æ³•æ£’çš„æ›¿ä»£å“ --- */
            cursor: url('https://fonts.gstatic.com/s/materialicons/v140/kg-n_NsHjB-tilH5Ea-hU_Wn3Z.woff2'), auto; 
            /* ç‚ºäº†ç¢ºä¿æ¸¸æ¨™èƒ½é¡¯ç¤ºï¼Œé€™è£¡ä½¿ç”¨äº†ä¸€å€‹å¸¸è¦‹çš„å­—é«”åœ–æ¨™ URLã€‚å¦‚æœæ¸¸æ¨™åœ–ç‰‡æœªè¼‰å…¥ï¼Œæœƒ fallback åˆ°ç€è¦½å™¨é è¨­æ¸¸æ¨™ã€‚ */
            overflow-x: hidden; 
        }
        .course-container {
            max-width: 900px;
            margin: 40px auto;
            background-color: #FFF;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border-top: 15px solid var(--primary-color);
            min-height: 600px;
            position: relative;
            background-image: url('https://www.transparenttextures.com/patterns/inspiration-geometry.png'); 
            background-repeat: repeat;
            background-blend-mode: overlay;
            opacity: 0.95;
            z-index: 10; 
            position: relative; 
        }
        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 25px;
        }
        
        /* --- å°èˆªèˆ‡åˆ†é  --- */
        .page-content {
            padding: 20px 0;
            display: none;
        }
        .page-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .nav-buttons {
            text-align: center;
            margin-top: 30px;
            position: absolute;
            bottom: 20px;
            width: 90%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: space-between;
            z-index: 11; 
        }
        .nav-group {
            display: flex;
        }
        .nav-buttons button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            margin: 0 10px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s;
        }
        .nav-buttons button:hover:not(:disabled) {
            background-color: #4A2C2A;
            transform: scale(1.05);
        }
        .nav-buttons button:disabled {
            background-color: #CCC;
            cursor: not-allowed !important; 
        }
        
        /* --- é¦–é å¤§æŒ‰éˆ•æ¨£å¼ --- */
        .home-menu {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap; 
            margin-top: 40px;
        }
        .home-menu button {
            width: 30%; 
            min-width: 200px; 
            padding: 30px 10px;
            font-size: 1.3em;
            margin: 10px 5px; 
            background-color: #B8860B; 
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.2s;
        }
        .home-menu button:hover {
            background-color: #D2B48C;
            color: var(--primary-color);
            transform: translateY(-5px);
        }

        /* [å½±ç‰‡/æ¸¬é©—/è¬›ç¾©æ¨£å¼] (ç°¡ç•¥) */
        .video-container {
            position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin-top: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .video-container iframe {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        }
        .info-card {
            padding: 15px 25px; margin-bottom: 15px; border-left: 5px solid var(--secondary-color); background-color: #FFFAEC; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .question {margin-bottom: 25px; padding: 15px; border-radius: 10px; background-color: #FFFDF7;}
        .option label {
            display: block; padding: 12px; margin: 8px 0; border-radius: 10px; cursor: pointer; border: 2px solid #EEE; transition: all 0.3s ease-in-out; position: relative;
        }
        .correct-answer {background-color: #E6F7E6 !important; border-color: var(--success-color) !important;}
        .incorrect-answer {background-color: #FDE7E7 !important; border-color: var(--error-color) !important;}

        /* --- å‹•æ…‹èƒŒæ™¯åœ–é¨°æ¨£å¼ --- */
        #background-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none; 
            overflow: hidden; 
            z-index: 1; 
        }
        .coffee-particle-bg {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0; 
            animation-name: floatUp, rotateAndFade;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
            animation-fill-mode: forwards; 
            will-change: transform, opacity; 
        }
        .coffee-particle-bg.bean {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%236F4E37" d="M16 256c0 137 111 248 248 248s248-111 248-248S393 8 256 8 16 119 16 256zM256 96c-59.5 0-108 48.5-108 108 0 54 39 99 92 107v-55h32v55c53-8 92-53 92-107 0-59.5-48.5-108-108-108z"/></svg>'); /* å’–å•¡è±†åœ–æ¨™ (SVG, ç¢ºä¿è¼‰å…¥) */
            width: 40px; height: 40px;
        }
        .coffee-particle-bg.cup {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="%23D2B48C" d="M160 48H352C361 48 368 55 368 64V240C368 249 361 256 352 256H160C151 256 144 249 144 240V64C144 55 151 48 160 48zM368 288V448C368 457 361 464 352 464H160C151 464 144 457 144 448V288H368zM416 128H448C465.7 128 480 142.3 480 160V352C480 369.7 465.7 384 448 384H416V128z"/></svg>'); /* å’–å•¡æ¯åœ–æ¨™ (SVG) */
            width: 50px; height: 50px;
        }

        @keyframes floatUp {
            0% { transform: translate(var(--x), var(--start-y)) scale(var(--scale)); opacity: 0; }
            20% { opacity: 0.4; }
            80% { opacity: 0.4; }
            100% { transform: translate(var(--x), var(--end-y)) scale(var(--scale)); opacity: 0; }
        }
        @keyframes rotateAndFade {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(var(--rotate-end)); }
        }

        /* --- é‡‘ç²‰ç‰¹æ•ˆæ¨£å¼ --- */
        .gold-dust {
            position: fixed; 
            background-color: gold;
            border-radius: 50%;
            pointer-events: none;
            width: 5px;
            height: 5px;
            opacity: 1;
            transform: scale(1);
            animation: goldFadeOut 0.8s ease-out forwards;
            z-index: 9999; 
        }

        @keyframes goldFadeOut {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(calc(var(--rand-x) * 1px), calc(calc(var(--rand-y) * 1px) + 20px)) scale(0); /* ç•¥å¾®å‘ä¸‹é£„è½ */
                opacity: 0;
            }
        }
    </style>
</head>
<body>

<div id="background-particles"></div>

<div class="course-container">
    <h1>â˜• å’–å•¡é­”æ³•å­¸é™¢ï¼šåŸºç¤å…¥é–€</h1>

    <div id="pageContainer">

        <div class="page-content active" data-page="1">
            <h2>âœ¨ æ­¡è¿ï¼æ‚¨æ˜¯ä¸‹ä¸€ä½å’–å•¡é­”æ³•å¸«ï¼</h2>
            <div style="text-align: center;">
                <img src="https://via.placeholder.com/400x250?text=Cute+Coffee+Magic+Intro" alt="å¯æ„›å’–å•¡é­”æ³•åœ–" style="border-radius: 15px; margin: 20px 0;">
            </div>
            <p style="text-align: center;">è«‹é¸æ“‡æ‚¨æƒ³é–‹å§‹çš„ç« ç¯€ï¼š</p>
            
            <div class="home-menu">
                <button onclick="jumpToPage(2)">
                    ğŸ¬ å½±ç‰‡è¬›å ‚
                </button>
                <button onclick="jumpToPage(3)">
                    ğŸ“š é­”æ³•è¬›ç¾©
                </button>
                <button onclick="jumpToPage(4)">
                    ğŸ§  é­”æ³•æ¸¬é©—
                </button>
            </div>
        </div>

        <div class="page-content" data-page="2">
            <h2>ğŸ¬ å½±ç‰‡è¬›å ‚ï¼šæ‰‹æ²–ç²¾è¯</h2>
            <p>è«‹å°ˆå¿ƒè§€çœ‹å½±ç‰‡ï¼ŒæŒæ¡æ‰‹æ²–å’–å•¡çš„åŸºç¤æ­¥é©Ÿï¼š</p>
            <div class="video-container">
                <iframe width="560" height="315" 
                    src="https://www.youtube.com/embed/3agylcAFZY8" 
                    title="æ‰‹æ²–å’–å•¡æ•™å­¸å½±ç‰‡" frameborder="0" 
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>
        </div>

        <div class="page-content" data-page="3">
            <h2>ğŸ“š é­”æ³•è¬›ç¾©</h2>
            
            <select id="lessonSelect" onchange="showLesson(this.value)">
                <option value="lesson1">1. èƒå–ä¸‰è¦ç´  (ç²—ç´°/æ°´æº«/æ™‚é–“)</option>
                <option value="lesson2">2. å…©å¤§å’–å•¡è±†æ—ç¾¤ (é˜¿æ‹‰æ¯”å¡/ç¾…å¸ƒæ–¯å¡”)</option>
                <option value="lesson3">3. å’–å•¡é¢¨å‘³è¼ªè§£æ</option>
            </select>

            <div id="lesson1" class="lesson-content active">
                <h3>ğŸ§ª èƒå–ä¸‰è¦ç´ </h3>
                <div class="info-card">
                    <h3>ğŸ’§ èƒå–æ°´æº«èˆ‡æ™‚é–“</h3>
                    <ul>
                        <li>**æ°´æº« ($90^\circ C \sim 96^\circ C$)ï¼š** æº«åº¦æ˜¯æº¶è§£é¢¨å‘³ç‰©è³ªçš„é—œéµã€‚å¤ªé«˜æœƒç„¦è‹¦ï¼Œå¤ªä½æœƒç”Ÿé…¸ã€‚</li>
                        <li>**èƒå–æ™‚é–“ï¼š** æ±ºå®šäº†æº¶è§£ç¨‹åº¦ã€‚æ‰‹æ²–é€šå¸¸åœ¨ 2~4 åˆ†é˜ã€‚</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h3>âš–ï¸ ç²—ç´°åº¦ (Grind Size)</h3>
                    <p>ç²—ç´°åº¦å½±éŸ¿æ°´æµé€šéå’–å•¡ç²‰çš„é€Ÿåº¦å’Œè¡¨é¢ç©ï¼š</p>
                    <ul>
                        <li>**æ¥µç´° (éºµç²‰)ï¼š** ç¾©å¼æ©Ÿ (Espresso)ã€‚</li>
                        <li>**ä¸­ç­‰ (æµ·é¹½)ï¼š** æ‰‹æ²–æ¿¾æ¯ (Pour Over)ã€‚</li>
                        <li>**ç²—é¡†ç²’ (ç²—ç ‚ç³–)ï¼š** æ³•å¼æ¿¾å£“å£º (French Press)ã€‚</li>
                    </ul>
                </div>
            </div>

            <div id="lesson2" class="lesson-content">
                <h3>ğŸŒ± å…©å¤§å’–å•¡è±†æ—ç¾¤</h3>
                 <div class="info-card" style="border-left-color: #8B4513;">
                    <h3>ğŸŒ¿ é˜¿æ‹‰æ¯”å¡ (Arabica)</h3>
                    <p>ä½”å…¨çƒç”¢é‡ç´„ 60%ã€‚**é¢¨å‘³ç´°è†©ã€å±¤æ¬¡è±å¯Œã€å¸¶æœ‰èŠ±é¦™æˆ–æœé…¸**ã€‚ç”Ÿé•·åœ¨é«˜æµ·æ‹”ï¼Œå°æ°£å€™è¼ƒæ•æ„Ÿï¼Œç¨®æ¤æˆæœ¬é«˜ã€‚</p>
                </div>
                <div class="info-card" style="border-left-color: #B8860B;">
                    <h3>ğŸ¥œ ç¾…å¸ƒæ–¯å¡” (Robusta)</h3>
                    <p>ä½”å…¨çƒç”¢é‡ç´„ 30-40%ã€‚**é¢¨å‘³å¼·çƒˆã€è‹¦æ¾€ã€å¸¶æœ‰æ©¡è† å‘³**ã€‚å’–å•¡å› å«é‡é«˜ï¼Œç”Ÿé•·åœ¨ä½æµ·æ‹”ï¼Œå¸¸ä½œç‚ºå³æº¶å’–å•¡æˆ–ç¾©å¼é…æ–¹ä»¥å¢åŠ æ²¹è„‚ (Crema)ã€‚</p>
                </div>
            </div>

            <div id="lesson3" class="lesson-content">
                <h3>ğŸŒˆ å’–å•¡é¢¨å‘³è¼ªè§£æ</h3>
                <div style="text-align: center; background-color: #F8F8F8; padding: 20px; border-radius: 10px;">
                    <img src="https://via.placeholder.com/350x350?text=Coffee+Flavor+Wheel" alt="å’–å•¡é¢¨å‘³è¼ªæ¨¡æ“¬åœ–" style="width: 100%; max-width: 350px;">
                    <p>é¢¨å‘³è¼ªå¹«åŠ©æˆ‘å€‘åˆ†è§£å’Œè­˜åˆ¥å’–å•¡ä¸­çš„è¤‡é›œé¢¨å‘³ï¼Œä¾‹å¦‚ï¼š**è“æœã€æŸ‘æ©˜ã€å …æœã€å¯å¯**ç­‰ç­‰ã€‚ç²¾æº–çš„æ²–ç…®èƒ½é‡‹æ”¾é€™äº›æ½›è—çš„é¢¨å‘³ã€‚</p>
                </div>
            </div>
        </div>


        <div class="page-content" data-page="4">
            <h2>ğŸ“ é­”æ³•æ¸¬é©— (1/2)</h2>
            <form id="quizForm1">
                <div class="question" data-correct="C"><p>1. å¦‚æœå¸Œæœ›å’–å•¡é¢¨å‘³ç´°è†©ã€å¸¶æœ‰æœé…¸ï¼Œæ‡‰é¸æ“‡å“ªç¨®å’–å•¡è±†ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q1', 'A')">A. ç¾…å¸ƒæ–¯å¡” (Robusta) <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q1', 'B')">B. ä½æµ·æ‹”å’–å•¡è±† <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q1', 'C')">C. é˜¿æ‹‰æ¯”å¡ (Arabica) <span class="answer-icon">âœ…</span></label></div></div>
                <div class="question" data-correct="B"><p>2. å’–å•¡å–èµ·ä¾†æœ‰ã€Œç”Ÿæ¾€çš„é…¸å‘³ã€ä¸”å‘³é“æ·¡ï¼Œè¡¨ç¤ºç™¼ç”Ÿäº†ä»€éº¼ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q2', 'A')">A. éåº¦èƒå– <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q2', 'B')">B. èƒå–ä¸è¶³ (Under-extraction) <span class="answer-icon">âœ…</span></label><label onclick="checkAnswer(this, 'Q2', 'C')">C. å®Œç¾èƒå– <span class="answer-icon">âŒ</span></label></div></div>
                <div class="question" data-correct="C"><p>3. ç¾©å¼æ¿ƒç¸®æ©Ÿ (Espresso) æ‡‰ä½¿ç”¨å“ªç¨®ç²—ç´°çš„ç²‰æœ«ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q3', 'A')">A. ç²—é¡†ç²’ (ç²—ç ‚ç³–) <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q3', 'B')">B. ä¸­ç­‰ç²—ç´° (æµ·é¹½) <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q3', 'C')">C. æ¥µç´°ç²‰ (éºµç²‰) <span class="answer-icon">âœ…</span></label></div></div>
                <div class="question" data-correct="B"><p>4. å“ªä¸€å€‹è¦ç´ ä¸»è¦å½±éŸ¿å’–å•¡ä¸­é¢¨å‘³ç‰©è³ªçš„ã€Œæº¶è§£é€Ÿåº¦ã€ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q4', 'A')">A. å’–å•¡ç²‰æœ«ç²—ç´° <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q4', 'B')">B. æ²–ç…®æ°´æº« <span class="answer-icon">âœ…</span></label><label onclick="checkAnswer(this, 'Q4', 'C')">C. æ‚¶è’¸æ™‚é–“ <span class="answer-icon">âŒ</span></label></div></div>
            </form>
        </div>

        <div class="page-content" data-page="5">
            <h2>ğŸ“ é­”æ³•æ¸¬é©— (2/2)</h2>
            <form id="quizForm2">
                 <div class="question" data-correct="A"><p>5. ç¾…å¸ƒæ–¯å¡”å’–å•¡è±†çš„ä¸»è¦ç‰¹å¾µä¹‹ä¸€æ˜¯ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q5', 'A')">A. å’–å•¡å› å«é‡æ¥µé«˜ <span class="answer-icon">âœ…</span></label><label onclick="checkAnswer(this, 'Q5', 'B')">B. é©åˆé«˜æµ·æ‹”ç”Ÿé•· <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q5', 'C')">C. é¢¨å‘³ä»¥èŠ±é¦™å’Œæœé…¸ç‚ºä¸» <span class="answer-icon">âŒ</span></label></div></div>
                <div class="question" data-correct="B"><p>6. ç†æƒ³çš„æ‰‹æ²–å’–å•¡èƒå–æ™‚é–“ç¯„åœé€šå¸¸æ˜¯å¤šå°‘ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q6', 'A')">A. 30 ç§’ä»¥å…§ <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q6', 'B')">B. 2 ~ 4 åˆ†é˜ <span class="answer-icon">âœ…</span></label><label onclick="checkAnswer(this, 'Q6', 'C')">C. 8 åˆ†é˜ä»¥ä¸Š <span class="answer-icon">âŒ</span></label></div></div>
                <div class="question" data-correct="A"><p>7. å’–å•¡é¢¨å‘³è¼ªçš„ä½œç”¨æ˜¯ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q7', 'A')">A. å¹«åŠ©åˆ†è§£å’Œè­˜åˆ¥å’–å•¡ä¸­çš„é¢¨å‘³ <span class="answer-icon">âœ…</span></label><label onclick="checkAnswer(this, 'Q7', 'B')">B. æ¸¬é‡å’–å•¡è±†çš„æ–°é®®åº¦ <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q7', 'C')">C. æŒ‡å°å’–å•¡è±†çš„çƒ˜ç„™ç¨‹åº¦ <span class="answer-icon">âŒ</span></label></div></div>
                <div class="question" data-correct="C"><p>8. ç•¶å’–å•¡å–èµ·ä¾†æœ‰æ˜é¡¯çš„ã€Œç„¦è‹¦å‘³ã€å’Œã€Œæ¾€å‘³ã€æ™‚ï¼Œæ‡‰è©²å¦‚ä½•èª¿æ•´æ²–ç…®åƒæ•¸ï¼Ÿ</p><div class="option"><label onclick="checkAnswer(this, 'Q8', 'A')">A. å¢åŠ æ°´æº« <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q8', 'B')">B. æ¸›å°‘ç²‰é‡ <span class="answer-icon">âŒ</span></label><label onclick="checkAnswer(this, 'Q8', 'C')">C. ç£¨ç²—ç²‰æœ«æˆ–é™ä½æ°´æº« <span class="answer-icon">âœ…</span></label></div></div>
            </form>
        </div>
        
        <div class="page-content" data-page="6">
            <h2>ğŸ† é­”æ³•ç•¢æ¥­å…¸ç¦®ï¼šæˆç¸¾å–®</h2>
            <div id="finalScore" style="text-align: center; padding: 30px; border: 3px dashed var(--primary-color); border-radius: 10px; font-size: 1.2em;">
                è«‹å®Œæˆæ‰€æœ‰æ¸¬é©—ï¼Œé»æ“Šã€Œè¨ˆç®—ç¸½æˆç¸¾ã€ã€‚
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="result-button" onclick="calculateFinalScore()">è¨ˆç®—ç¸½æˆç¸¾</button>
            </div>
        </div>
    </div>
    
    <div class="nav-buttons">
        <button id="homeBtn" onclick="goToHome()">é¦–é </button>
        <div class="nav-group">
            <button id="prevBtn" onclick="changePage(-1)" disabled>ä¸Šä¸€é </button>
            <button id="nextBtn" onclick="changePage(1)">ä¸‹ä¸€é </button>
        </div>
    </div>

</div>

<script>
    let currentPage = 1;
    const totalPages = 6;
    let quizScore = 0;
    const totalQuizQuestions = 8;
    const answeredQuestions = {}; 

    // ===================================
    // é­”æ³•ç‰¹æ•ˆ JavaScript
    // ===================================

    /**
     * å‹•æ…‹èƒŒæ™¯åœ–é¨°ç”Ÿæˆèˆ‡å‹•ç•«
     */
    function createFloatingObjects() {
        const backgroundParticles = document.getElementById('background-particles');
        const objectTypes = ['bean', 'cup']; 

        for (let i = 0; i < 20; i++) { 
            const particle = document.createElement('div');
            const type = objectTypes[Math.floor(Math.random() * objectTypes.length)];
            particle.classList.add('coffee-particle-bg', type);

            // ç¢ºä¿æ¯æ¬¡å‹•ç•«çš„åƒæ•¸éƒ½æ˜¯éš¨æ©Ÿä¸”å”¯ä¸€çš„
            const startX = Math.random() * 100; 
            const startY = 100 + Math.random() * 50; 
            const endY = -20 - Math.random() * 50; 
            const scale = 0.5 + Math.random() * 1; 
            const duration = 15 + Math.random() * 15; 
            const delay = Math.random() * 30; 
            const rotateEnd = (Math.random() - 0.5) * 720; 

            particle.style.setProperty('--x', `${startX}vw`);
            particle.style.setProperty('--start-y', `${startY}vh`);
            particle.style.setProperty('--end-y', `${endY}vh`);
            particle.style.setProperty('--scale', scale);
            particle.style.setProperty('--rotate-end', `${rotateEnd}deg`);
            particle.style.animationDuration = `${duration}s`;
            particle.style.animationDelay = `${delay}s`;

            backgroundParticles.appendChild(particle);
        }
    }

    /**
     * é­”æ³•æ£’é‡‘ç²‰ç‰¹æ•ˆ
     */
    document.addEventListener('mousemove', (e) => {
        if (Math.random() < 0.3) { 
            const goldDust = document.createElement('div');
            goldDust.classList.add('gold-dust');
            goldDust.style.left = `${e.clientX}px`;
            goldDust.style.top = `${e.clientY}px`;

            // ç‚ºé‡‘ç²‰å‹•ç•«éš¨æ©Ÿè³¦å€¼ï¼Œå‰µé€ æ•£é–‹æ•ˆæœ
            const randX = (Math.random() - 0.5) * 50; 
            const randY = (Math.random() - 0.5) * 50;
            goldDust.style.setProperty('--rand-x', randX);
            goldDust.style.setProperty('--rand-y', randY);
            
            document.body.appendChild(goldDust);

            // å‹•ç•«çµæŸå¾Œç§»é™¤å…ƒç´ ä»¥é‡‹æ”¾è¨˜æ†¶é«”
            goldDust.addEventListener('animationend', () => {
                goldDust.remove();
            });
        }
    });
    // ===================================
    // èª²ç¨‹é é¢å°èˆªèˆ‡åŠŸèƒ½ JavaScript
    // ===================================


    function jumpToPage(targetPage) {
        if (targetPage < 1 || targetPage > totalPages) return; 
        const direction = targetPage - currentPage;
        changePage(direction);
        if (targetPage === 3) {
            const select = document.getElementById('lessonSelect');
            if (select) {
                showLesson(select.value); 
            }
        }
    }


    function changePage(direction) {
        document.querySelector(`.page-content[data-page="${currentPage}"]`).classList.remove('active');
        currentPage += direction;
        
        if (currentPage < 1) currentPage = 1;
        if (currentPage > totalPages) currentPage = totalPages;

        const newPage = document.querySelector(`.page-content[data-page="${currentPage}"]`);
        newPage.classList.add('active');
        
        document.getElementById('prevBtn').disabled = (currentPage === 1);
        document.getElementById('nextBtn').disabled = (currentPage === totalPages);
        document.getElementById('homeBtn').disabled = (currentPage === 1); 
    }

    function showLesson(lessonId) {
        document.querySelectorAll('.lesson-content').forEach(el => {
            el.classList.remove('active');
        });
        document.getElementById(lessonId).classList.add('active');
    }

    function goToHome() {
        if (currentPage !== 1) {
            quizScore = 0;
            for (const key in answeredQuestions) {
                delete answeredQuestions[key];
            }
            
            document.querySelectorAll('.option label').forEach(el => {
                el.classList.remove('correct-answer', 'incorrect-answer');
                el.style.pointerEvents = 'auto'; 
                const icon = el.querySelector('.answer-icon');
                if (icon) icon.style.display = 'none'; 
            });

            document.getElementById('finalScore').innerHTML = 'è«‹å®Œæˆæ‰€æœ‰æ¸¬é©—ï¼Œé»æ“Šã€Œè¨ˆç®—ç¸½æˆç¸¾ã€ã€‚';
            document.getElementById('lessonSelect').value = 'lesson1';
            
            jumpToPage(1); 
        }
    }

    function launchConfetti() {
        confetti({ particleCount: 150, spread: 90, origin: { y: 0.6 } });
        confetti({ particleCount: 100, spread: 60, startVelocity: 55, origin: { y: 0.8 } });
    }

    function checkAnswer(selectedLabel, questionId, selectedAnswer) {
        if (answeredQuestions[questionId]) return;

        const questionDiv = selectedLabel.closest('.question');
        const correctAnswer = questionDiv.getAttribute('data-correct');
        const isCorrect = (selectedAnswer === correctAnswer);
        
        const allLabels = questionDiv.querySelectorAll('label');
        allLabels.forEach(label => {
            label.style.pointerEvents = 'none'; 
            label.classList.add('incorrect-answer');
            const icon = label.querySelector('.answer-icon');
            if (icon) { icon.innerHTML = 'âŒ'; icon.style.display = 'inline-block'; }
        });

        const correctLabel = questionDiv.querySelector(`.option label[onclick$="'${correctAnswer}')"]`);
        if (correctLabel) {
            correctLabel.classList.remove('incorrect-answer');
            correctLabel.classList.add('correct-answer');
            const correctIcon = correctLabel.querySelector('.answer-icon');
            if (correctIcon) { correctIcon.innerHTML = 'âœ…'; }
        }
        
        if (isCorrect) {
            quizScore++;
            launchConfetti(); 
        }
        
        answeredQuestions[questionId] = true;
    }
    
    function calculateFinalScore() {
        const finalScoreDiv = document.getElementById('finalScore');
        const totalAnswered = Object.keys(answeredQuestions).length;

        if (totalAnswered < totalQuizQuestions) {
             finalScoreDiv.innerHTML = `<p style="color: var(--error-color);">ğŸ›‘ **è­¦å‘Šï¼š** æ‚¨é‚„æœ‰ **${totalQuizQuestions - totalAnswered}** é¡Œæœªä½œç­”ï¼è«‹å®Œæˆæ‰€æœ‰æ¸¬é©—ã€‚</p>`;
             return;
        }

        const percentage = (quizScore / totalQuizQuestions) * 100;
        let message = `<p>ç¸½å¾—åˆ†ï¼š<strong style="font-size: 2.2em; color: var(--primary-color);">${quizScore} / ${totalQuizQuestions}</strong></p>`;
        
        if (quizScore === totalQuizQuestions) {
            launchConfetti(); 
            message += '<p style="color: var(--success-color); font-size: 1.5em;">ğŸ‰ **æ­å–œæ‚¨ï¼** æ‚¨å·²æˆç‚ºå’–å•¡é­”æ³•å¤§å¸«ï¼</p>';
        } else if (percentage >= 75) {
            message += '<p style="color: orange;">ğŸ‘ **è¡¨ç¾è¶…æ£’ï¼** é›¢æ»¿åˆ†åªå·®ä¸€é»é»ï¼</p>';
        } else {
            message += '<p style="color: var(--error-color);">ğŸ§ **ç¹¼çºŒåŠ æ²¹ï¼** è«‹å›å»è¤‡ç¿’çŸ¥è­˜è¬›ç¾©ã€‚</p>';
        }
        
        finalScoreDiv.innerHTML = message;
    }
    
    // é é¢åŠ è¼‰æ™‚åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
        changePage(0); 
        showLesson('lesson1'); 
        createFloatingObjects(); // å•Ÿå‹•å‹•æ…‹èƒŒæ™¯
    });
</script>

</body>
</html>











